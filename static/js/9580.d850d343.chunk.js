"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[9580],{89580:function(e,t,n){n.r(t);var r=n(70885),c=n(53217),s=n(79041),a=n(90710),i=n(24846),l=n(78983),o=n(74569),u=n.n(o),d=n(72791),h=n(16856),x=n(72426),f=n.n(x),j=n(80184),m="https://yog-seven.vercel.app";t.default=function(){var e=(0,d.useState)(0),t=(0,r.Z)(e,2),n=t[0],o=t[1],x=(0,d.useState)(""),p=(0,r.Z)(x,2),N=p[0],C=p[1],S=(0,d.useState)(""),b=(0,r.Z)(S,2),g=b[0],y=b[1],k=(0,d.useState)(""),v=(0,r.Z)(k,2),A=v[0],I=v[1],Z=(0,d.useState)(""),_=(0,r.Z)(Z,2),D=(_[0],_[1]),O=(0,d.useState)(""),T=(0,r.Z)(O,2),z=T[0],w=T[1],B=(0,d.useState)(""),E=(0,r.Z)(B,2),F=E[0],H=E[1],L=(0,d.useState)(null),J=(0,r.Z)(L,2),M=J[0],V=(J[1],JSON.parse(localStorage.getItem("user-info"))),q=V.token,P=V.user.username,R=V.user.centerCode,W=(0,d.useState)(),Y=(0,r.Z)(W,2),$=Y[0],G=Y[1],K=(0,d.useState)(),Q=(0,r.Z)(K,2),U=Q[0],X=Q[1],ee=(0,d.useState)(),te=(0,r.Z)(ee,2),ne=te[0],re=te[1],ce=(0,d.useState)([]),se=(0,r.Z)(ce,2),ae=se[0],ie=se[1],le=(0,d.useState)([]),oe=(0,r.Z)(le,2),ue=oe[0],de=oe[1],he=(0,d.useState)(),xe=(0,r.Z)(he,2),fe=xe[0],je=xe[1];function me(){u().get("".concat(m,"/staffAttendance/all"),{headers:{Authorization:"Bearer ".concat(q)}}).then((function(e){ie(e.data),console.log(e.data)})).catch((function(e){console.error(e)}))}(0,d.useEffect)((function(){me(),u().get("".concat(m,"/employeeForm/all"),{headers:{Authorization:"Bearer ".concat(q)}}).then((function(e){console.log(e.data),de(e.data),y(e.data.FullName),I(e.data.ContactNumber)})).catch((function(e){console.error(e)}))}),[]);var pe=function(e){var t={checkOut:(new Date).toLocaleTimeString()};fetch("".concat(m,"/staffAttendance/update/").concat(e),{method:"POST",headers:{Authorization:"Bearer ".concat(q),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){e.json().then((function(e){me()}))}))};return(0,j.jsxs)(l.xH,{className:"mb-3 border-success",children:[(0,j.jsx)(l.bn,{style:{backgroundColor:"#0B5345",color:"white"},children:"Staff CheckIn"}),(0,j.jsxs)(l.sl,{children:[(0,j.jsxs)(l.rb,{children:[(0,j.jsx)(l.b7,{lg:4,children:(0,j.jsx)(l.xH,{children:(0,j.jsxs)(l.sl,{children:[(0,j.jsx)("label",{style:{color:"red"},children:F}),(0,j.jsxs)(l.rb,{children:[(0,j.jsx)(l.b7,{xs:5,children:(0,j.jsx)(i.Z,{icon:c.$,size:"8xl"})}),(0,j.jsx)(l.b7,{className:"mt-4",children:(0,j.jsx)(l.jO,{type:"text",label:"Attendance ID",placeholder:"Enter Attendance ID",value:N,onChange:function(e){return C(e.target.value)}})})]}),(0,j.jsx)(l.u5,{className:"mt-1 float-end",onClick:function(){ue.filter((function(e){return e.AttendanceID.includes(N)})).length,ue.filter((function(e){return e.AttendanceID.includes(N)})).length?ue.filter((function(e){return e.AttendanceID.includes(N)})).map((function(e){return y(e.FullName),C(e.AttendanceID),D(e.CenterID),o(1),w(e.status),H("")})):H("Not Found")},children:"Submit"})]})})}),n>=1&&(0,j.jsx)(l.b7,{lg:4,children:(0,j.jsx)(l.xH,{children:(0,j.jsxs)(l.sl,{children:[(0,j.jsxs)(l.rb,{children:[(0,j.jsx)(l.b7,{xs:5,children:(0,j.jsx)(i.Z,{icon:s._,size:"8xl"})}),(0,j.jsxs)(l.b7,{className:"mt-1",children:[(0,j.jsxs)(l.uS,{children:["Staff Name: ",g,(0,j.jsx)("br",{}),"Attendance ID: ",N,(0,j.jsx)("br",{}),"Center ID: ",R,(0,j.jsx)("br",{}),"Status: ",z?"Active":"Inactive",(0,j.jsx)("br",{})]}),(0,j.jsx)(l.jO,{type:"date",value:$,onChange:function(e){return G(e.target.value)}}),(0,j.jsx)(l.jO,{type:"time",value:U,onChange:function(e){return X(e.target.value)}})]})]}),null==M&&(0,j.jsx)(l.u5,{className:"mt-1 float-end",onClick:function(){(new Date).toLocaleTimeString();var e=new Date,t=(e.getFullYear(),e.getMonth(),e.getDay(),{username:P,StaffName:g,staffContact:A,centerId:R,attentanceId:N,checkDate:$,checkIn:U});fetch("".concat(m,"/staffAttendance/create"),{method:"POST",headers:{Authorization:"Bearer ".concat(q),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){e.json().then((function(e){je(e._id),alert("successfully submitted"),o(2)}))}))},children:"Check In"})]})})}),n>=2&&(0,j.jsx)(l.b7,{lg:4,children:(0,j.jsx)(l.xH,{children:(0,j.jsxs)(l.sl,{children:[(0,j.jsxs)(l.rb,{children:[(0,j.jsx)(l.b7,{xs:5,className:"mt-2",children:(0,j.jsx)(i.Z,{icon:a.V,size:"7xl"})}),(0,j.jsxs)(l.b7,{className:"mt-3",children:[(0,j.jsxs)(l.uS,{children:["Staff Name: ",g,(0,j.jsx)("br",{}),"Attendance ID: ",N,(0,j.jsx)("br",{}),"Attendance Time: ",U]}),(0,j.jsx)(l.jO,{type:"time",value:ne,onChange:function(e){return re(e.target.value)}})]})]}),null!=U&&(0,j.jsx)(l.u5,{className:"mt-1 float-end",onClick:function(){pe(fe),o(0)},children:"Check Out"})]})})})]}),(0,j.jsxs)(l.Sx,{className:"mt-3",align:"middle",bordered:!0,style:{borderColor:"#0B5345"},hover:!0,responsive:!0,children:[(0,j.jsx)(l.V,{style:{backgroundColor:"#0B5345",color:"white"},children:(0,j.jsxs)(l.T6,{children:[(0,j.jsx)(l.is,{children:"Sr.No"}),(0,j.jsx)(l.is,{children:"Staff Name"}),(0,j.jsx)(l.is,{children:"Staff Contact"}),(0,j.jsx)(l.is,{children:"Attendance ID"}),(0,j.jsx)(l.is,{children:"Center ID"}),(0,j.jsx)(l.is,{children:"Check Date"}),(0,j.jsx)(l.is,{children:"CheckIn Time"}),(0,j.jsx)(l.is,{children:"CheckOut Time"}),(0,j.jsx)(l.is,{children:"Action"}),(0,j.jsx)(l.is,{children:"Edit"})]})}),(0,j.jsx)(l.NR,{children:ae.reverse().filter((function(e){return e.username===P})).map((function(e,t){return(0,j.jsxs)(l.T6,{children:[(0,j.jsx)(l.NN,{children:t+1}),(0,j.jsx)(l.NN,{children:e.StaffName}),(0,j.jsx)(l.NN,{children:e.staffContact}),(0,j.jsx)(l.NN,{children:e.attentanceId}),(0,j.jsx)(l.NN,{children:e.centerId}),(0,j.jsx)(l.NN,{children:f()(e.createdAt).format("LL")}),(0,j.jsx)(l.NN,{children:e.checkIn}),(0,j.jsx)(l.NN,{children:e.checkOut}),(0,j.jsx)(l.NN,{children:void 0===e.checkOut?(0,j.jsx)(l.u5,{color:"danger",onClick:function(){return pe(e._id)},children:"Check Out"}):(0,j.jsx)(l.u5,{disabled:!0,color:"danger",onClick:function(){return pe(e._id)},children:"Check Out"})}),(0,j.jsxs)(l.NN,{children:[(0,j.jsx)(h.zmo,{style:{cursor:"pointer",markerStart:"10px"},onClick:function(){return deleteEnquiry(e._id)},size:"20px"})," ",(0,j.jsx)(h.ZkW,{style:{cursor:"pointer",markerStart:"10px"},onClick:function(){return deleteEnquiry(e._id)},size:"20px"})," "]})]},t)}))})]})]})]})}},90710:function(e,t,n){n.d(t,{V:function(){return r}});var r=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='77.155 272.034 351.75 272.034 351.75 272.033 351.75 240.034 351.75 240.033 77.155 240.033 152.208 164.98 152.208 164.98 152.208 164.979 129.58 142.353 15.899 256.033 15.9 256.034 15.899 256.034 129.58 369.715 152.208 347.088 152.208 347.087 152.208 347.087 77.155 272.034' class='ci-primary'/><polygon fill='var(--ci-primary-color, currentColor)' points='160 16 160 48 464 48 464 464 160 464 160 496 496 496 496 16 160 16' class='ci-primary'/>"]},79041:function(e,t,n){n.d(t,{_:function(){return r}});var r=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M426.072,86.928A238.75,238.75,0,0,0,88.428,424.572,238.75,238.75,0,0,0,426.072,86.928ZM257.25,462.5c-114,0-206.75-92.748-206.75-206.75S143.248,49,257.25,49,464,141.748,464,255.75,371.252,462.5,257.25,462.5Z' class='ci-primary'/><polygon fill='var(--ci-primary-color, currentColor)' points='221.27 305.808 147.857 232.396 125.23 255.023 221.27 351.063 388.77 183.564 366.142 160.937 221.27 305.808' class='ci-primary'/>"]}}]);
//# sourceMappingURL=9580.d850d343.chunk.js.map